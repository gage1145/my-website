{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset = "UTF-8">
        <title>Gage Rowden</title>
        <link href="{% static '/css/main.css' %}" rel="stylesheet" type="text/css"> 
    </head>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const input = document.getElementById("command-input");
            const history = document.getElementById("history");

            input.addEventListener("keydown", function(event) {
                if (event.key === "Enter") {
                    const command = input.value.trim();
                    if (command) {
                        // Show the entered command in history
                        const commandLine = document.createElement("div");
                        commandLine.className = "input-line";
                        commandLine.innerHTML = `<span id="user">visitor</span><span id="host">@gagerowden.com</span><span>:~$ ${command}</span>`;
                        history.appendChild(commandLine);

                        // Get the output
                        const output = handleCommand(command);

                        if (output) {
                            const outputLine = document.createElement("div");
                            outputLine.className = "output";
                            outputLine.textContent = output;
                            history.appendChild(outputLine);
                        }
                    }
                    input.value = ""; // clear input
                    // Scroll down as new lines are added
                    window.scrollTo(0, document.body.scrollHeight);
                }
            });

            function handleCommand(cmd) {
                switch(cmd) {
                    case "help":
                        return "Available commands:\n - help\n - about\n - projects\n - clear";
                    case "about":
                        return "Hi, I'm Gage Rowden. This is my portfolio site.";
                    case "projects":
                        return "Project 1: ...\nProject 2: ...\n(You can wire this to Django later)";
                    case "clear":
                        history.innerHTML = "";
                        return null;
                    default:
                        return `Command not found: ${cmd}`;
                }
            }
        });
    </script>
    <body>
        {% block content %}
        {% endblock %}
    </body>
</html>